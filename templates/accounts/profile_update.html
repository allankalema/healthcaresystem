{% extends 'base.html' %}
{% load static %}

{% block content %}
<main class="mt-16 sm:mt-20 min-h-screen flex items-center justify-center bg-gray-100">
    <div class="w-full max-w-4xl p-6 sm:p-8 bg-white rounded-lg shadow-lg">
        <h2 class="text-2xl sm:text-3xl font-bold text-hotpink-dark mb-6 text-center">Update Profile</h2>

        <!-- Display Error Messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="mb-4 p-4 text-sm text-red-700 bg-red-100 rounded-lg" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <!-- User Details -->
            <div>
                <h3 class="text-xl font-semibold text-hotpink-dark mb-4">User Details</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Username -->
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
                        <input type="text" id="username" name="username" value="{{ user_form.instance.username }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter username">
                        {% if user_form.username.errors %}
                            <div class="text-sm text-red-600">{{ user_form.username.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- First Name -->
                    <div>
                        <label for="first_name" class="block text-sm font-medium text-gray-700">First Name</label>
                        <input type="text" id="first_name" name="first_name" value="{{ user_form.instance.first_name }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter first name">
                        {% if user_form.first_name.errors %}
                            <div class="text-sm text-red-600">{{ user_form.first_name.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Last Name -->
                    <div>
                        <label for="last_name" class="block text-sm font-medium text-gray-700">Last Name</label>
                        <input type="text" id="last_name" name="last_name" value="{{ user_form.instance.last_name }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter last name">
                        {% if user_form.last_name.errors %}
                            <div class="text-sm text-red-600">{{ user_form.last_name.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                        <input type="email" id="email" name="email" value="{{ user_form.instance.email }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter email">
                        {% if user_form.email.errors %}
                            <div class="text-sm text-red-600">{{ user_form.email.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Date of Birth -->
                    <div>
                        <label for="date_of_birth" class="block text-sm font-medium text-gray-700">Date of Birth</label>
                        <input type="date" id="date_of_birth" name="date_of_birth" value="{{ user_form.instance.date_of_birth|default:'' }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink">
                        {% if user_form.date_of_birth.errors %}
                            <div class="text-sm text-red-600">{{ user_form.date_of_birth.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- NIN -->
                    <div>
                        <label for="nin" class="block text-sm font-medium text-gray-700">NIN</label>
                        <input type="text" id="nin" name="nin" value="{{ user_form.instance.nin }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter NIN">
                        {% if user_form.nin.errors %}
                            <div class="text-sm text-red-600">{{ user_form.nin.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Marital Status -->
                    <div>
                        <label for="marital_status" class="block text-sm font-medium text-gray-700">Marital Status</label>
                        <select id="marital_status" name="marital_status"
                                class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink">
                            <option value="Single" {% if user_form.instance.marital_status == 'Single' %}selected{% endif %}>Single</option>
                            <option value="Married" {% if user_form.instance.marital_status == 'Married' %}selected{% endif %}>Married</option>
                        </select>
                        {% if user_form.marital_status.errors %}
                            <div class="text-sm text-red-600">{{ user_form.marital_status.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Contact -->
                    <div>
                        <label for="contact" class="block text-sm font-medium text-gray-700">Contact</label>
                        <input type="text" id="contact" name="contact" value="{{ user_form.instance.contact }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter contact number">
                        {% if user_form.contact.errors %}
                            <div class="text-sm text-red-600">{{ user_form.contact.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Location Details -->
            <div>
                <h3 class="text-xl font-semibold text-hotpink-dark mb-4">Location Details</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Village -->
                    <div>
                        <label for="village" class="block text-sm font-medium text-gray-700">Village</label>
                        <input type="text" id="village" name="village" value="{{ location_form.instance.village }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter village">
                        {% if location_form.village.errors %}
                            <div class="text-sm text-red-600">{{ location_form.village.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Parish -->
                    <div>
                        <label for="parish" class="block text-sm font-medium text-gray-700">Parish</label>
                        <input type="text" id="parish" name="parish" value="{{ location_form.instance.parish }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter parish">
                        {% if location_form.parish.errors %}
                            <div class="text-sm text-red-600">{{ location_form.parish.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Sub County -->
                    <div>
                        <label for="sub_county" class="block text-sm font-medium text-gray-700">Sub County</label>
                        <input type="text" id="sub_county" name="sub_county" value="{{ location_form.instance.sub_county }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter sub-county">
                        {% if location_form.sub_county.errors %}
                            <div class="text-sm text-red-600">{{ location_form.sub_county.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- District -->
                    <div>
                        <label for="district" class="block text-sm font-medium text-gray-700">District</label>
                        <input type="text" id="district" name="district" value="{{ location_form.instance.district }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter district">
                        {% if location_form.district.errors %}
                            <div class="text-sm text-red-600">{{ location_form.district.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Address -->
                    <div class="sm:col-span-2">
                        <label for="address" class="block text-sm font-medium text-gray-700">Address</label>
                        <textarea id="address" name="address" rows="3"
                                  class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                                  placeholder="Enter address">{{ location_form.instance.address }}</textarea>
                        {% if location_form.address.errors %}
                            <div class="text-sm text-red-600">{{ location_form.address.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Patient Details -->
            <div>
                <h3 class="text-xl font-semibold text-hotpink-dark mb-4">Patient Details</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Home Address -->
                    <div class="sm:col-span-2">
                        <label for="home_address" class="block text-sm font-medium text-gray-700">Home Address</label>
                        <textarea id="home_address" name="home_address" rows="3"
                                  class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                                  placeholder="Enter home address">{{ patient_form.instance.home_address }}</textarea>
                        {% if patient_form.home_address.errors %}
                            <div class="text-sm text-red-600">{{ patient_form.home_address.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Number of Children -->
                    <div>
                        <label for="number_of_children" class="block text-sm font-medium text-gray-700">Number of Children</label>
                        <input type="number" id="number_of_children" name="number_of_children" value="{{ patient_form.instance.number_of_children }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter number of children">
                        {% if patient_form.number_of_children.errors %}
                            <div class="text-sm text-red-600">{{ patient_form.number_of_children.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Date of Last Period -->
                    <div>
                        <label for="date_of_last_period" class="block text-sm font-medium text-gray-700">Date of Last Period</label>
                        <input type="date" id="date_of_last_period" name="date_of_last_period" value="{{ patient_form.instance.date_of_last_period|default:'' }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink">
                        {% if patient_form.date_of_last_period.errors %}
                            <div class="text-sm text-red-600">{{ patient_form.date_of_last_period.errors }}</div>
                        {% endif %}
                    </div>
                    <!-- Occupation -->
                    <div>
                        <label for="occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                        <input type="text" id="occupation" name="occupation" value="{{ patient_form.instance.occupation }}"
                               class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-hotpink focus:border-hotpink"
                               placeholder="Enter occupation">
                        {% if patient_form.occupation.errors %}
                            <div class="text-sm text-red-600">{{ patient_form.occupation.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div>
                <button type="submit"
                        class="w-full bg-hotpink text-white px-4 py-2 rounded-lg font-semibold hover:bg-hotpink-light transition duration-300">
                    Update Profile
                </button>
            </div>
        </form>
    </div>
</main>
{% endblock %}